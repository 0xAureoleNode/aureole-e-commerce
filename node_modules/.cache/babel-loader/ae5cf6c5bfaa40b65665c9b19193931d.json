{"ast":null,"code":"import _defineProperty from\"/Users/hanziniu/aureole-e-commerce/e-commerce/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/hanziniu/aureole-e-commerce/e-commerce/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/Users/hanziniu/aureole-e-commerce/e-commerce/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/hanziniu/aureole-e-commerce/e-commerce/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/hanziniu/aureole-e-commerce/e-commerce/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from'react';import FormInput from'../form-input/form-input.component';import{SignUpContainer,ButtonsContainer}from'./sign-in-form.style';import Button,{BUTTON_TYPE_CLASSES}from'../button/button.component';import{signInWithGooglePopup,createUserDocumentFromAuth,signInAuthUserWithEmailAndPassword}from'../../utils/firebase/firebase.utils';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var defaultFormFields={email:'',password:''};var SignInForm=function SignInForm(){var _useState=useState(defaultFormFields),_useState2=_slicedToArray(_useState,2),formFields=_useState2[0],setFormFields=_useState2[1];var email=formFields.email,password=formFields.password;var resetFormFields=function resetFormFields(){setFormFields(defaultFormFields);};var signInWithGoogle=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return signInWithGooglePopup();case 2:case\"end\":return _context.stop();}}},_callee);}));return function signInWithGoogle(){return _ref.apply(this,arguments);};}();var handleSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(e){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:e.preventDefault();_context2.prev=1;_context2.next=4;return signInAuthUserWithEmailAndPassword(email,password);case 4:resetFormFields();_context2.next=17;break;case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](1);_context2.t1=_context2.t0.code;_context2.next=_context2.t1==='auth/wrong-password'?12:_context2.t1==='auth/user-not-found'?14:16;break;case 12:alert('incorrect password for email');return _context2.abrupt(\"break\",17);case 14:alert('no user associated with this email');return _context2.abrupt(\"break\",17);case 16:console.log(_context2.t0);case 17:case\"end\":return _context2.stop();}}},_callee2,null,[[1,7]]);}));return function handleSubmit(_x){return _ref2.apply(this,arguments);};}();var handleChange=function handleChange(e){var _e$target=e.target,name=_e$target.name,value=_e$target.value;setFormFields(_objectSpread(_objectSpread({},formFields),{},_defineProperty({},name,value)));};return/*#__PURE__*/_jsxs(SignUpContainer,{children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Already have an account?\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Sign In with your email and password\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(FormInput,{label:\"Email\",type:\"email\",required:true,onChange:handleChange,name:\"email\",value:email}),/*#__PURE__*/_jsx(FormInput,{label:\"Password\",type:\"password\",required:true,onChange:handleChange,name:\"password\",value:password}),/*#__PURE__*/_jsxs(ButtonsContainer,{children:[/*#__PURE__*/_jsx(Button,{type:\"submit\",children:\"Sign In\"}),/*#__PURE__*/_jsx(Button,{type:\"button\",buttonType:BUTTON_TYPE_CLASSES.google,onClick:signInWithGoogle,children:\"Google sign in\"})]})]})]});};export default SignInForm;","map":{"version":3,"names":["useState","FormInput","SignUpContainer","ButtonsContainer","Button","BUTTON_TYPE_CLASSES","signInWithGooglePopup","createUserDocumentFromAuth","signInAuthUserWithEmailAndPassword","defaultFormFields","email","password","SignInForm","formFields","setFormFields","resetFormFields","signInWithGoogle","handleSubmit","e","preventDefault","code","alert","console","log","handleChange","target","name","value","google"],"sources":["/Users/hanziniu/aureole-e-commerce/e-commerce/src/components/sign-in-form/sign-in-form.component.jsx"],"sourcesContent":["import { useState } from 'react';\nimport FormInput from '../form-input/form-input.component';\nimport { SignUpContainer, ButtonsContainer } from './sign-in-form.style';\nimport Button, { BUTTON_TYPE_CLASSES } from '../button/button.component';\nimport {\n  signInWithGooglePopup,\n  createUserDocumentFromAuth,\n  signInAuthUserWithEmailAndPassword,\n} from '../../utils/firebase/firebase.utils';\n\nconst defaultFormFields = {\n  email: '',\n  password: '',\n};\n\nconst SignInForm = () => {\n  const [formFields, setFormFields] = useState(defaultFormFields);\n  const { email, password } = formFields;\n\n  const resetFormFields = () => {\n    setFormFields(defaultFormFields);\n  };\n\n  const signInWithGoogle = async () => {\n    await signInWithGooglePopup();\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n\n    try {\n      await signInAuthUserWithEmailAndPassword(email, password);\n\n      resetFormFields();\n    } catch (error) {\n      switch (error.code) {\n        case 'auth/wrong-password':\n          alert('incorrect password for email');\n          break;\n        case 'auth/user-not-found':\n          alert('no user associated with this email');\n          break;\n        default:\n          console.log(error);\n      }\n    }\n  };\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setFormFields({ ...formFields, [name]: value });\n  };\n\n  return (\n    <SignUpContainer>\n      <h4>Already have an account?</h4>\n      <span>Sign In with your email and password</span>\n      <form onSubmit={handleSubmit}>\n        <FormInput\n          label=\"Email\"\n          type=\"email\"\n          required\n          onChange={handleChange}\n          name=\"email\"\n          value={email}\n        />\n\n        <FormInput\n          label=\"Password\"\n          type=\"password\"\n          required\n          onChange={handleChange}\n          name=\"password\"\n          value={password}\n        />\n        <ButtonsContainer>\n          <Button type=\"submit\">Sign In</Button>\n          <Button\n            type=\"button\"\n            buttonType={BUTTON_TYPE_CLASSES.google}\n            onClick={signInWithGoogle}\n          >\n            Google sign in\n          </Button>\n        </ButtonsContainer>\n      </form>\n    </SignUpContainer>\n  );\n};\n\nexport default SignInForm;\n"],"mappings":"gqBAAA,OAASA,QAAT,KAAyB,OAAzB,CACA,MAAOC,UAAP,KAAsB,oCAAtB,CACA,OAASC,eAAT,CAA0BC,gBAA1B,KAAkD,sBAAlD,CACA,MAAOC,OAAP,EAAiBC,mBAAjB,KAA4C,4BAA5C,CACA,OACEC,qBADF,CAEEC,0BAFF,CAGEC,kCAHF,KAIO,qCAJP,C,wFAMA,GAAMC,kBAAiB,CAAG,CACxBC,KAAK,CAAE,EADiB,CAExBC,QAAQ,CAAE,EAFc,CAA1B,CAKA,GAAMC,WAAU,CAAG,QAAbA,WAAa,EAAM,CACvB,cAAoCZ,QAAQ,CAACS,iBAAD,CAA5C,wCAAOI,UAAP,eAAmBC,aAAnB,eACA,GAAQJ,MAAR,CAA4BG,UAA5B,CAAQH,KAAR,CAAeC,QAAf,CAA4BE,UAA5B,CAAeF,QAAf,CAEA,GAAMI,gBAAe,CAAG,QAAlBA,gBAAkB,EAAM,CAC5BD,aAAa,CAACL,iBAAD,CAAb,CACD,CAFD,CAIA,GAAMO,iBAAgB,4FAAG,2JACjBV,sBAAqB,EADJ,uDAAH,kBAAhBU,iBAAgB,0CAAtB,CAIA,GAAMC,aAAY,6FAAG,kBAAOC,CAAP,wHACnBA,CAAC,CAACC,cAAF,GADmB,wCAIXX,mCAAkC,CAACE,KAAD,CAAQC,QAAR,CAJvB,QAMjBI,eAAe,GANE,gGAQT,aAAMK,IARG,+BASV,qBATU,mBAYV,qBAZU,qBAUbC,KAAK,CAAC,8BAAD,CAAL,CAVa,4CAabA,KAAK,CAAC,oCAAD,CAAL,CAba,4CAgBbC,OAAO,CAACC,GAAR,eAhBa,sEAAH,kBAAZN,aAAY,6CAAlB,CAqBA,GAAMO,aAAY,CAAG,QAAfA,aAAe,CAACN,CAAD,CAAO,CAC1B,cAAwBA,CAAC,CAACO,MAA1B,CAAQC,IAAR,WAAQA,IAAR,CAAcC,KAAd,WAAcA,KAAd,CACAb,aAAa,gCAAMD,UAAN,wBAAmBa,IAAnB,CAA0BC,KAA1B,GAAb,CACD,CAHD,CAKA,mBACE,MAAC,eAAD,yBACE,gDADF,cAEE,8DAFF,cAGE,cAAM,QAAQ,CAAEV,YAAhB,wBACE,KAAC,SAAD,EACE,KAAK,CAAC,OADR,CAEE,IAAI,CAAC,OAFP,CAGE,QAAQ,KAHV,CAIE,QAAQ,CAAEO,YAJZ,CAKE,IAAI,CAAC,OALP,CAME,KAAK,CAAEd,KANT,EADF,cAUE,KAAC,SAAD,EACE,KAAK,CAAC,UADR,CAEE,IAAI,CAAC,UAFP,CAGE,QAAQ,KAHV,CAIE,QAAQ,CAAEc,YAJZ,CAKE,IAAI,CAAC,UALP,CAME,KAAK,CAAEb,QANT,EAVF,cAkBE,MAAC,gBAAD,yBACE,KAAC,MAAD,EAAQ,IAAI,CAAC,QAAb,qBADF,cAEE,KAAC,MAAD,EACE,IAAI,CAAC,QADP,CAEE,UAAU,CAAEN,mBAAmB,CAACuB,MAFlC,CAGE,OAAO,CAAEZ,gBAHX,4BAFF,GAlBF,GAHF,GADF,CAmCD,CAzED,CA2EA,cAAeJ,WAAf"},"metadata":{},"sourceType":"module"}